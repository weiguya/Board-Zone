const username = localStorage.getItem('username');
document.getElementById('usernameDisplay').textContent = username || 'Guest';

const socket = io();

// Emit message with username and message
const form = document.getElementById('form');
form.addEventListener('submit', (e) => {
  e.preventDefault();
  const message = document.getElementById('input').value;
  if (message) {
    socket.emit('chat message', { username, message });  // ส่งชื่อและข้อความ
    document.getElementById('input').value = '';  // ลบข้อความหลังส่ง
  }
});

// รับข้อความจากเซิร์ฟเวอร์
socket.on('chat message', (data) => {
  const item = document.createElement('li');
  item.textContent = `${data.username}: ${data.message}`;  // แสดงชื่อและข้อความ
  document.getElementById('messages').appendChild(item);
  window.scrollTo(0, document.body.scrollHeight);
});
